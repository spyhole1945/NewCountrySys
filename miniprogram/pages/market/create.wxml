<view class="create-container">
  <scroll-view class="form-scroll" scroll-y>
    <view class="form-section">
      <!-- 分类选择 -->
      <view class="form-item">
        <text class="label required">分类</text>
        <picker 
          mode="selector" 
          range="{{categories}}" 
          range-key="name"
          value="{{categoryIndex}}"
          bindchange="onCategoryChange"
        >
          <view class="picker">
            {{categories[categoryIndex].name}}
            <image src="/images/arrow-right.png" class="arrow"></image>
          </view>
        </picker>
      </view>

      <!-- 标题 -->
      <view class="form-item">
        <text class="label required">标题</text>
        <input 
          class="input" 
          placeholder="请输入标题（如：出租拖拉机）" 
          value="{{formData.title}}"
          bindinput="onTitleInput"
          maxlength="50"
        />
        <text class="count">{{formData.title.length}}/50</text>
      </view>

      <!-- 描述 -->
      <view class="form-item">
        <text class="label required">详细描述</text>
        <textarea 
          class="textarea" 
          placeholder="请详细描述您的需求或服务内容"
          value="{{formData.description}}"
          bindinput="onDescriptionInput"
          maxlength="500"
          auto-height
        />
        <text class="count">{{formData.description.length}}/500</text>
      </view>

      <!-- 价格 -->
      <view class="form-item">
        <text class="label">价格/报酬</text>
        <input 
          class="input" 
          type="digit"
          placeholder="请输入价格（可选，留空为面议）" 
          value="{{formData.price}}"
          bindinput="onPriceInput"
        />
        <text class="unit">元</text>
      </view>

      <!-- 联系电话 -->
      <view class="form-item">
        <text class="label required">联系电话</text>
        <input 
          class="input" 
          type="number"
          placeholder="请输入您的联系电话" 
          value="{{formData.phone}}"
          bindinput="onPhoneInput"
          maxlength="11"
        />
      </view>

      <!-- 图片上传 -->
      <view class="form-item">
        <text class="label">图片（最多3张）</text>
        <view class="image-upload">
          <view 
            wx:for="{{formData.images}}" 
            wx:key="index"
            class="image-item"
          >
            <image src="{{item}}" mode="aspectFill"></image>
            <view class="delete-btn" bindtap="deleteImage" data-index="{{index}}">
              <image src="/images/close.png" class="delete-icon"></image>
            </view>
          </view>
          
          <view 
            wx:if="{{formData.images.length < 3}}" 
            class="upload-btn"
            bindtap="chooseImage"
          >
            <image src="/images/camera.png" class="camera-icon"></image>
            <text class="upload-text">添加图片</text>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- 底部按钮 -->
  <view class="footer">
    <button class="submit-btn" bindtap="submit" disabled="{{submitting}}">
      {{submitting ? '发布中...' : '发布'}}
    </button>
  </view>
</view>
